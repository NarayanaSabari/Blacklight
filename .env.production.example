# =============================================================================
# Blacklight Production Environment Configuration
# =============================================================================
# Copy this file to .env.production and fill in the values
# Usage: ./deploy.sh start
# =============================================================================

# =============================================================================
# SHARED CONFIGURATION (Used by multiple containers)
# =============================================================================

# -----------------------------------------------------------------------------
# Security (REQUIRED - Generate strong secrets!)
# -----------------------------------------------------------------------------
SECRET_KEY=generate-a-strong-secret-key-here

# -----------------------------------------------------------------------------
# PostgreSQL Database Credentials
# -----------------------------------------------------------------------------
POSTGRES_USER=blacklight
POSTGRES_PASSWORD=change-this-strong-password
POSTGRES_DB=blacklight

# =============================================================================
# BACKEND CONTAINER (Flask API)
# =============================================================================

# -----------------------------------------------------------------------------
# AI Configuration (REQUIRED)
# -----------------------------------------------------------------------------
AI_PARSING_PROVIDER=gemini
GOOGLE_API_KEY=your-google-api-key-here
GEMINI_MODEL=gemini-2.5-flash
GEMINI_EMBEDDING_MODEL=gemini-embedding-001
GEMINI_EMBEDDING_DIMENSION=768

# -----------------------------------------------------------------------------
# Google Cloud Storage (REQUIRED for production)
# -----------------------------------------------------------------------------
GCS_BUCKET_NAME=your-bucket-name
GCS_PROJECT_ID=your-project-id
# Note: Place credentials file at ./credentials/gcs-credentials.json

# -----------------------------------------------------------------------------
# File Upload Limits
# -----------------------------------------------------------------------------
MAX_FILE_SIZE_MB=10
ALLOWED_DOCUMENT_TYPES=pdf,doc,docx,jpg,jpeg,png
SIGNED_URL_EXPIRY_SECONDS=3600

# -----------------------------------------------------------------------------
# SMTP Email Configuration (REQUIRED for invitations)
# -----------------------------------------------------------------------------
SMTP_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password-here
SMTP_USE_TLS=true
SMTP_FROM_EMAIL=your-email@gmail.com
SMTP_FROM_NAME="BlackLight Company HR"

# -----------------------------------------------------------------------------
# Frontend URLs (Update with your VM's IP or domain)
# -----------------------------------------------------------------------------
# URL where candidates will access the onboarding portal
FRONTEND_BASE_URL=http://your-domain.com/portal

# CORS origins (comma-separated frontend URLs)
CORS_ORIGINS=http://your-domain.com

# -----------------------------------------------------------------------------
# Email Integration OAuth (Gmail)
# -----------------------------------------------------------------------------
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_OAUTH_CLIENT_ID=your-google-oauth-client-id
GOOGLE_OAUTH_CLIENT_SECRET=your-google-oauth-client-secret
# IMPORTANT: Must match Google Cloud Console redirect URI
GOOGLE_OAUTH_REDIRECT_URI=http://your-domain.com/api/integrations/email/callback/gmail

# -----------------------------------------------------------------------------
# Email Integration OAuth (Outlook/Microsoft 365)
# -----------------------------------------------------------------------------
# Get from: https://portal.azure.com/
MICROSOFT_OAUTH_CLIENT_ID=your-microsoft-oauth-client-id
MICROSOFT_OAUTH_CLIENT_SECRET=your-microsoft-oauth-client-secret
# IMPORTANT: Must match Azure Portal redirect URI
MICROSOFT_OAUTH_REDIRECT_URI=http://your-domain.com/api/integrations/email/callback/outlook
MICROSOFT_OAUTH_TENANT=common

# -----------------------------------------------------------------------------
# Email Sync Settings
# -----------------------------------------------------------------------------
EMAIL_SYNC_ENABLED=true
EMAIL_SYNC_FREQUENCY_MINUTES=15
EMAIL_SYNC_INITIAL_LOOKBACK_DAYS=10
EMAIL_SYNC_MAX_EMAILS_PER_PAGE=100

# -----------------------------------------------------------------------------
# Token Encryption Key (REQUIRED)
# -----------------------------------------------------------------------------
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
TOKEN_ENCRYPTION_KEY=generate-a-fernet-encryption-key-here

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO

# =============================================================================
# INNGEST CONTAINER (Background Jobs)
# =============================================================================

# -----------------------------------------------------------------------------
# Inngest Keys (REQUIRED - Must be pure hex strings with even number of chars)
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 16
INNGEST_EVENT_KEY=deadbeef0123456789abcdef01234567
INNGEST_SIGNING_KEY=cafebabe0123456789abcdef01234567

# =============================================================================
# FRONTEND CONTAINERS (Portal & Central Dashboard)
# =============================================================================

# -----------------------------------------------------------------------------
# API URLs for Frontend Builds
# -----------------------------------------------------------------------------
# These URLs are used by frontend to make API calls (through Nginx reverse proxy)
# Frontend appends /api/* to these URLs, Nginx routes /api/* to backend
PORTAL_API_URL=http://your-domain.com
CENTRAL_API_URL=http://your-domain.com

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================
# 
# After configuring this file:
#
# 1. Copy to .env.production:
#    cp .env.production.example .env.production
#
# 2. Place GCS credentials:
#    ./credentials/gcs-credentials.json
#
# 3. Deploy the application:
#    ./deploy.sh start
#
# 4. View logs:
#    ./deploy.sh logs
#
# 5. Access the application:
#    - Portal (HR):     http://your-domain.com/portal
#    - Central (Admin): http://your-domain.com/central
#    - Backend API:     http://your-domain.com/api
#    - Inngest:         http://your-domain.com:8288
#
# For complete deployment commands, run: ./deploy.sh
# =============================================================================
